"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@ai-sdk+react@2.0.93_react@18.2.0_zod@4.1.12";
exports.ids = ["vendor-chunks/@ai-sdk+react@2.0.93_react@18.2.0_zod@4.1.12"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@ai-sdk+react@2.0.93_react@18.2.0_zod@4.1.12/node_modules/@ai-sdk/react/dist/index.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@ai-sdk+react@2.0.93_react@18.2.0_zod@4.1.12/node_modules/@ai-sdk/react/dist/index.js ***!
  \******************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  Chat: () => Chat,\n  experimental_useObject: () => experimental_useObject,\n  useChat: () => useChat,\n  useCompletion: () => useCompletion\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/use-chat.ts\nvar import_react = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.0_@opentelemetry+_f65b0a39e6bfaef5eef2cad5af992871/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n// src/chat.react.ts\nvar import_ai = __webpack_require__(/*! ai */ \"(ssr)/./node_modules/.pnpm/ai@5.0.93_zod@4.1.12/node_modules/ai/dist/index.js\");\n\n// src/throttle.ts\nvar import_throttleit = __toESM(__webpack_require__(/*! throttleit */ \"(ssr)/./node_modules/.pnpm/throttleit@2.1.0/node_modules/throttleit/index.js\"));\nfunction throttle(fn, waitMs) {\n  return waitMs != null ? (0, import_throttleit.default)(fn, waitMs) : fn;\n}\n\n// src/chat.react.ts\nvar _messages, _status, _error, _messagesCallbacks, _statusCallbacks, _errorCallbacks, _callMessagesCallbacks, _callStatusCallbacks, _callErrorCallbacks;\nvar ReactChatState = class {\n  constructor(initialMessages = []) {\n    __privateAdd(this, _messages, void 0);\n    __privateAdd(this, _status, \"ready\");\n    __privateAdd(this, _error, void 0);\n    __privateAdd(this, _messagesCallbacks, /* @__PURE__ */ new Set());\n    __privateAdd(this, _statusCallbacks, /* @__PURE__ */ new Set());\n    __privateAdd(this, _errorCallbacks, /* @__PURE__ */ new Set());\n    this.pushMessage = (message) => {\n      __privateSet(this, _messages, __privateGet(this, _messages).concat(message));\n      __privateGet(this, _callMessagesCallbacks).call(this);\n    };\n    this.popMessage = () => {\n      __privateSet(this, _messages, __privateGet(this, _messages).slice(0, -1));\n      __privateGet(this, _callMessagesCallbacks).call(this);\n    };\n    this.replaceMessage = (index, message) => {\n      __privateSet(this, _messages, [\n        ...__privateGet(this, _messages).slice(0, index),\n        // We deep clone the message here to ensure the new React Compiler (currently in RC) detects deeply nested parts/metadata changes:\n        this.snapshot(message),\n        ...__privateGet(this, _messages).slice(index + 1)\n      ]);\n      __privateGet(this, _callMessagesCallbacks).call(this);\n    };\n    this.snapshot = (value) => structuredClone(value);\n    this[\"~registerMessagesCallback\"] = (onChange, throttleWaitMs) => {\n      const callback = throttleWaitMs ? throttle(onChange, throttleWaitMs) : onChange;\n      __privateGet(this, _messagesCallbacks).add(callback);\n      return () => {\n        __privateGet(this, _messagesCallbacks).delete(callback);\n      };\n    };\n    this[\"~registerStatusCallback\"] = (onChange) => {\n      __privateGet(this, _statusCallbacks).add(onChange);\n      return () => {\n        __privateGet(this, _statusCallbacks).delete(onChange);\n      };\n    };\n    this[\"~registerErrorCallback\"] = (onChange) => {\n      __privateGet(this, _errorCallbacks).add(onChange);\n      return () => {\n        __privateGet(this, _errorCallbacks).delete(onChange);\n      };\n    };\n    __privateAdd(this, _callMessagesCallbacks, () => {\n      __privateGet(this, _messagesCallbacks).forEach((callback) => callback());\n    });\n    __privateAdd(this, _callStatusCallbacks, () => {\n      __privateGet(this, _statusCallbacks).forEach((callback) => callback());\n    });\n    __privateAdd(this, _callErrorCallbacks, () => {\n      __privateGet(this, _errorCallbacks).forEach((callback) => callback());\n    });\n    __privateSet(this, _messages, initialMessages);\n  }\n  get status() {\n    return __privateGet(this, _status);\n  }\n  set status(newStatus) {\n    __privateSet(this, _status, newStatus);\n    __privateGet(this, _callStatusCallbacks).call(this);\n  }\n  get error() {\n    return __privateGet(this, _error);\n  }\n  set error(newError) {\n    __privateSet(this, _error, newError);\n    __privateGet(this, _callErrorCallbacks).call(this);\n  }\n  get messages() {\n    return __privateGet(this, _messages);\n  }\n  set messages(newMessages) {\n    __privateSet(this, _messages, [...newMessages]);\n    __privateGet(this, _callMessagesCallbacks).call(this);\n  }\n};\n_messages = new WeakMap();\n_status = new WeakMap();\n_error = new WeakMap();\n_messagesCallbacks = new WeakMap();\n_statusCallbacks = new WeakMap();\n_errorCallbacks = new WeakMap();\n_callMessagesCallbacks = new WeakMap();\n_callStatusCallbacks = new WeakMap();\n_callErrorCallbacks = new WeakMap();\nvar _state;\nvar Chat = class extends import_ai.AbstractChat {\n  constructor({ messages, ...init }) {\n    const state = new ReactChatState(messages);\n    super({ ...init, state });\n    __privateAdd(this, _state, void 0);\n    this[\"~registerMessagesCallback\"] = (onChange, throttleWaitMs) => __privateGet(this, _state)[\"~registerMessagesCallback\"](onChange, throttleWaitMs);\n    this[\"~registerStatusCallback\"] = (onChange) => __privateGet(this, _state)[\"~registerStatusCallback\"](onChange);\n    this[\"~registerErrorCallback\"] = (onChange) => __privateGet(this, _state)[\"~registerErrorCallback\"](onChange);\n    __privateSet(this, _state, state);\n  }\n};\n_state = new WeakMap();\n\n// src/use-chat.ts\nfunction useChat({\n  experimental_throttle: throttleWaitMs,\n  resume = false,\n  ...options\n} = {}) {\n  const chatRef = (0, import_react.useRef)(\n    \"chat\" in options ? options.chat : new Chat(options)\n  );\n  const shouldRecreateChat = \"chat\" in options && options.chat !== chatRef.current || \"id\" in options && chatRef.current.id !== options.id;\n  if (shouldRecreateChat) {\n    chatRef.current = \"chat\" in options ? options.chat : new Chat(options);\n  }\n  const optionsId = \"id\" in options ? options.id : null;\n  const subscribeToMessages = (0, import_react.useCallback)(\n    (update) => chatRef.current[\"~registerMessagesCallback\"](update, throttleWaitMs),\n    // optionsId is required to trigger re-subscription when the chat ID changes\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [throttleWaitMs, optionsId]\n  );\n  const messages = (0, import_react.useSyncExternalStore)(\n    subscribeToMessages,\n    () => chatRef.current.messages,\n    () => chatRef.current.messages\n  );\n  const status = (0, import_react.useSyncExternalStore)(\n    chatRef.current[\"~registerStatusCallback\"],\n    () => chatRef.current.status,\n    () => chatRef.current.status\n  );\n  const error = (0, import_react.useSyncExternalStore)(\n    chatRef.current[\"~registerErrorCallback\"],\n    () => chatRef.current.error,\n    () => chatRef.current.error\n  );\n  const setMessages = (0, import_react.useCallback)(\n    (messagesParam) => {\n      if (typeof messagesParam === \"function\") {\n        messagesParam = messagesParam(chatRef.current.messages);\n      }\n      chatRef.current.messages = messagesParam;\n    },\n    [chatRef]\n  );\n  (0, import_react.useEffect)(() => {\n    if (resume) {\n      chatRef.current.resumeStream();\n    }\n  }, [resume, chatRef]);\n  return {\n    id: chatRef.current.id,\n    messages,\n    setMessages,\n    sendMessage: chatRef.current.sendMessage,\n    regenerate: chatRef.current.regenerate,\n    clearError: chatRef.current.clearError,\n    stop: chatRef.current.stop,\n    error,\n    resumeStream: chatRef.current.resumeStream,\n    status,\n    /**\n     * @deprecated Use `addToolOutput` instead.\n     */\n    addToolResult: chatRef.current.addToolOutput,\n    addToolOutput: chatRef.current.addToolOutput\n  };\n}\n\n// src/use-completion.ts\nvar import_ai2 = __webpack_require__(/*! ai */ \"(ssr)/./node_modules/.pnpm/ai@5.0.93_zod@4.1.12/node_modules/ai/dist/index.js\");\nvar import_react2 = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.0_@opentelemetry+_f65b0a39e6bfaef5eef2cad5af992871/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\nvar import_swr = __toESM(__webpack_require__(/*! swr */ \"(ssr)/./node_modules/.pnpm/swr@2.3.6_react@18.2.0/node_modules/swr/dist/index/index.js\"));\nfunction useCompletion({\n  api = \"/api/completion\",\n  id,\n  initialCompletion = \"\",\n  initialInput = \"\",\n  credentials,\n  headers,\n  body,\n  streamProtocol = \"data\",\n  fetch: fetch2,\n  onFinish,\n  onError,\n  experimental_throttle: throttleWaitMs\n} = {}) {\n  const hookId = (0, import_react2.useId)();\n  const completionId = id || hookId;\n  const { data, mutate } = (0, import_swr.default)([api, completionId], null, {\n    fallbackData: initialCompletion\n  });\n  const { data: isLoading = false, mutate: mutateLoading } = (0, import_swr.default)(\n    [completionId, \"loading\"],\n    null\n  );\n  const [error, setError] = (0, import_react2.useState)(void 0);\n  const completion = data;\n  const [abortController, setAbortController] = (0, import_react2.useState)(null);\n  const extraMetadataRef = (0, import_react2.useRef)({\n    credentials,\n    headers,\n    body\n  });\n  (0, import_react2.useEffect)(() => {\n    extraMetadataRef.current = {\n      credentials,\n      headers,\n      body\n    };\n  }, [credentials, headers, body]);\n  const triggerRequest = (0, import_react2.useCallback)(\n    async (prompt, options) => (0, import_ai2.callCompletionApi)({\n      api,\n      prompt,\n      credentials: extraMetadataRef.current.credentials,\n      headers: { ...extraMetadataRef.current.headers, ...options == null ? void 0 : options.headers },\n      body: {\n        ...extraMetadataRef.current.body,\n        ...options == null ? void 0 : options.body\n      },\n      streamProtocol,\n      fetch: fetch2,\n      // throttle streamed ui updates:\n      setCompletion: throttle(\n        (completion2) => mutate(completion2, false),\n        throttleWaitMs\n      ),\n      setLoading: mutateLoading,\n      setError,\n      setAbortController,\n      onFinish,\n      onError\n    }),\n    [\n      mutate,\n      mutateLoading,\n      api,\n      extraMetadataRef,\n      setAbortController,\n      onFinish,\n      onError,\n      setError,\n      streamProtocol,\n      fetch2,\n      throttleWaitMs\n    ]\n  );\n  const stop = (0, import_react2.useCallback)(() => {\n    if (abortController) {\n      abortController.abort();\n      setAbortController(null);\n    }\n  }, [abortController]);\n  const setCompletion = (0, import_react2.useCallback)(\n    (completion2) => {\n      mutate(completion2, false);\n    },\n    [mutate]\n  );\n  const complete = (0, import_react2.useCallback)(\n    async (prompt, options) => {\n      return triggerRequest(prompt, options);\n    },\n    [triggerRequest]\n  );\n  const [input, setInput] = (0, import_react2.useState)(initialInput);\n  const handleSubmit = (0, import_react2.useCallback)(\n    (event) => {\n      var _a;\n      (_a = event == null ? void 0 : event.preventDefault) == null ? void 0 : _a.call(event);\n      return input ? complete(input) : void 0;\n    },\n    [input, complete]\n  );\n  const handleInputChange = (0, import_react2.useCallback)(\n    (e) => {\n      setInput(e.target.value);\n    },\n    [setInput]\n  );\n  return {\n    completion,\n    complete,\n    error,\n    setCompletion,\n    stop,\n    input,\n    setInput,\n    handleInputChange,\n    handleSubmit,\n    isLoading\n  };\n}\n\n// src/use-object.ts\nvar import_provider_utils = __webpack_require__(/*! @ai-sdk/provider-utils */ \"(ssr)/./node_modules/.pnpm/@ai-sdk+provider-utils@3.0.17_zod@4.1.12/node_modules/@ai-sdk/provider-utils/dist/index.js\");\nvar import_ai3 = __webpack_require__(/*! ai */ \"(ssr)/./node_modules/.pnpm/ai@5.0.93_zod@4.1.12/node_modules/ai/dist/index.js\");\nvar import_react3 = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.0_@opentelemetry+_f65b0a39e6bfaef5eef2cad5af992871/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\nvar import_swr2 = __toESM(__webpack_require__(/*! swr */ \"(ssr)/./node_modules/.pnpm/swr@2.3.6_react@18.2.0/node_modules/swr/dist/index/index.js\"));\nvar getOriginalFetch = () => fetch;\nfunction useObject({\n  api,\n  id,\n  schema,\n  // required, in the future we will use it for validation\n  initialValue,\n  fetch: fetch2,\n  onError,\n  onFinish,\n  headers,\n  credentials\n}) {\n  const hookId = (0, import_react3.useId)();\n  const completionId = id != null ? id : hookId;\n  const { data, mutate } = (0, import_swr2.default)(\n    [api, completionId],\n    null,\n    { fallbackData: initialValue }\n  );\n  const [error, setError] = (0, import_react3.useState)(void 0);\n  const [isLoading, setIsLoading] = (0, import_react3.useState)(false);\n  const abortControllerRef = (0, import_react3.useRef)(null);\n  const stop = (0, import_react3.useCallback)(() => {\n    var _a;\n    try {\n      (_a = abortControllerRef.current) == null ? void 0 : _a.abort();\n    } catch (ignored) {\n    } finally {\n      setIsLoading(false);\n      abortControllerRef.current = null;\n    }\n  }, []);\n  const submit = async (input) => {\n    var _a;\n    try {\n      clearObject();\n      setIsLoading(true);\n      const abortController = new AbortController();\n      abortControllerRef.current = abortController;\n      const actualFetch = fetch2 != null ? fetch2 : getOriginalFetch();\n      const response = await actualFetch(api, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...headers\n        },\n        credentials,\n        signal: abortController.signal,\n        body: JSON.stringify(input)\n      });\n      if (!response.ok) {\n        throw new Error(\n          (_a = await response.text()) != null ? _a : \"Failed to fetch the response.\"\n        );\n      }\n      if (response.body == null) {\n        throw new Error(\"The response body is empty.\");\n      }\n      let accumulatedText = \"\";\n      let latestObject = void 0;\n      await response.body.pipeThrough(new TextDecoderStream()).pipeTo(\n        new WritableStream({\n          async write(chunk) {\n            accumulatedText += chunk;\n            const { value } = await (0, import_ai3.parsePartialJson)(accumulatedText);\n            const currentObject = value;\n            if (!(0, import_ai3.isDeepEqualData)(latestObject, currentObject)) {\n              latestObject = currentObject;\n              mutate(currentObject);\n            }\n          },\n          async close() {\n            setIsLoading(false);\n            abortControllerRef.current = null;\n            if (onFinish != null) {\n              const validationResult = await (0, import_provider_utils.safeValidateTypes)({\n                value: latestObject,\n                schema: (0, import_ai3.asSchema)(schema)\n              });\n              onFinish(\n                validationResult.success ? { object: validationResult.value, error: void 0 } : { object: void 0, error: validationResult.error }\n              );\n            }\n          }\n        })\n      );\n    } catch (error2) {\n      if ((0, import_provider_utils.isAbortError)(error2)) {\n        return;\n      }\n      if (onError && error2 instanceof Error) {\n        onError(error2);\n      }\n      setIsLoading(false);\n      setError(error2 instanceof Error ? error2 : new Error(String(error2)));\n    }\n  };\n  const clear = () => {\n    stop();\n    clearObject();\n  };\n  const clearObject = () => {\n    setError(void 0);\n    setIsLoading(false);\n    mutate(void 0);\n  };\n  return {\n    submit,\n    object: data,\n    error,\n    isLoading,\n    stop,\n    clear\n  };\n}\nvar experimental_useObject = useObject;\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGFpLXNkaytyZWFjdEAyLjAuOTNfcmVhY3RAMTguMi4wX3pvZEA0LjEuMTIvbm9kZV9tb2R1bGVzL0BhaS1zZGsvcmVhY3QvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0NBQWtDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSw4QkFBOEI7QUFDdkc7QUFDQTtBQUNBLG9EQUFvRCxrQkFBa0IsYUFBYTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQSxtQkFBbUIsbUJBQU8sQ0FBQyx3TEFBTzs7QUFFbEM7QUFDQSxnQkFBZ0IsbUJBQU8sQ0FBQyx5RkFBSTs7QUFFNUI7QUFDQSxnQ0FBZ0MsbUJBQU8sQ0FBQyxnR0FBWTtBQUNwRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsNkNBQTZDLGdEQUFnRCxJQUFJO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLENBS0w7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL25ld2RpdmluZWJ5dGUtd2ViLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhaS1zZGsrcmVhY3RAMi4wLjkzX3JlYWN0QDE4LjIuMF96b2RANC4xLjEyL25vZGVfbW9kdWxlcy9AYWktc2RrL3JlYWN0L2Rpc3QvaW5kZXguanM/MjdkYyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZSA9IE9iamVjdC5jcmVhdGU7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19nZXRQcm90b09mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0VTTSA9IChtb2QsIGlzTm9kZU1vZGUsIHRhcmdldCkgPT4gKHRhcmdldCA9IG1vZCAhPSBudWxsID8gX19jcmVhdGUoX19nZXRQcm90b09mKG1vZCkpIDoge30sIF9fY29weVByb3BzKFxuICAvLyBJZiB0aGUgaW1wb3J0ZXIgaXMgaW4gbm9kZSBjb21wYXRpYmlsaXR5IG1vZGUgb3IgdGhpcyBpcyBub3QgYW4gRVNNXG4gIC8vIGZpbGUgdGhhdCBoYXMgYmVlbiBjb252ZXJ0ZWQgdG8gYSBDb21tb25KUyBmaWxlIHVzaW5nIGEgQmFiZWwtXG4gIC8vIGNvbXBhdGlibGUgdHJhbnNmb3JtIChpLmUuIFwiX19lc01vZHVsZVwiIGhhcyBub3QgYmVlbiBzZXQpLCB0aGVuIHNldFxuICAvLyBcImRlZmF1bHRcIiB0byB0aGUgQ29tbW9uSlMgXCJtb2R1bGUuZXhwb3J0c1wiIGZvciBub2RlIGNvbXBhdGliaWxpdHkuXG4gIGlzTm9kZU1vZGUgfHwgIW1vZCB8fCAhbW9kLl9fZXNNb2R1bGUgPyBfX2RlZlByb3AodGFyZ2V0LCBcImRlZmF1bHRcIiwgeyB2YWx1ZTogbW9kLCBlbnVtZXJhYmxlOiB0cnVlIH0pIDogdGFyZ2V0LFxuICBtb2RcbikpO1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgX19hY2Nlc3NDaGVjayA9IChvYmosIG1lbWJlciwgbXNnKSA9PiB7XG4gIGlmICghbWVtYmVyLmhhcyhvYmopKVxuICAgIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG59O1xudmFyIF9fcHJpdmF0ZUdldCA9IChvYmosIG1lbWJlciwgZ2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIik7XG4gIHJldHVybiBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopO1xufTtcbnZhciBfX3ByaXZhdGVBZGQgPSAob2JqLCBtZW1iZXIsIHZhbHVlKSA9PiB7XG4gIGlmIChtZW1iZXIuaGFzKG9iaikpXG4gICAgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZVwiKTtcbiAgbWVtYmVyIGluc3RhbmNlb2YgV2Vha1NldCA/IG1lbWJlci5hZGQob2JqKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG59O1xudmFyIF9fcHJpdmF0ZVNldCA9IChvYmosIG1lbWJlciwgdmFsdWUsIHNldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcIndyaXRlIHRvIHByaXZhdGUgZmllbGRcIik7XG4gIHNldHRlciA/IHNldHRlci5jYWxsKG9iaiwgdmFsdWUpIDogbWVtYmVyLnNldChvYmosIHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuLy8gc3JjL2luZGV4LnRzXG52YXIgc3JjX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KHNyY19leHBvcnRzLCB7XG4gIENoYXQ6ICgpID0+IENoYXQsXG4gIGV4cGVyaW1lbnRhbF91c2VPYmplY3Q6ICgpID0+IGV4cGVyaW1lbnRhbF91c2VPYmplY3QsXG4gIHVzZUNoYXQ6ICgpID0+IHVzZUNoYXQsXG4gIHVzZUNvbXBsZXRpb246ICgpID0+IHVzZUNvbXBsZXRpb25cbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBfX3RvQ29tbW9uSlMoc3JjX2V4cG9ydHMpO1xuXG4vLyBzcmMvdXNlLWNoYXQudHNcbnZhciBpbXBvcnRfcmVhY3QgPSByZXF1aXJlKFwicmVhY3RcIik7XG5cbi8vIHNyYy9jaGF0LnJlYWN0LnRzXG52YXIgaW1wb3J0X2FpID0gcmVxdWlyZShcImFpXCIpO1xuXG4vLyBzcmMvdGhyb3R0bGUudHNcbnZhciBpbXBvcnRfdGhyb3R0bGVpdCA9IF9fdG9FU00ocmVxdWlyZShcInRocm90dGxlaXRcIikpO1xuZnVuY3Rpb24gdGhyb3R0bGUoZm4sIHdhaXRNcykge1xuICByZXR1cm4gd2FpdE1zICE9IG51bGwgPyAoMCwgaW1wb3J0X3Rocm90dGxlaXQuZGVmYXVsdCkoZm4sIHdhaXRNcykgOiBmbjtcbn1cblxuLy8gc3JjL2NoYXQucmVhY3QudHNcbnZhciBfbWVzc2FnZXMsIF9zdGF0dXMsIF9lcnJvciwgX21lc3NhZ2VzQ2FsbGJhY2tzLCBfc3RhdHVzQ2FsbGJhY2tzLCBfZXJyb3JDYWxsYmFja3MsIF9jYWxsTWVzc2FnZXNDYWxsYmFja3MsIF9jYWxsU3RhdHVzQ2FsbGJhY2tzLCBfY2FsbEVycm9yQ2FsbGJhY2tzO1xudmFyIFJlYWN0Q2hhdFN0YXRlID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihpbml0aWFsTWVzc2FnZXMgPSBbXSkge1xuICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfbWVzc2FnZXMsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlQWRkKHRoaXMsIF9zdGF0dXMsIFwicmVhZHlcIik7XG4gICAgX19wcml2YXRlQWRkKHRoaXMsIF9lcnJvciwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVBZGQodGhpcywgX21lc3NhZ2VzQ2FsbGJhY2tzLCAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpKTtcbiAgICBfX3ByaXZhdGVBZGQodGhpcywgX3N0YXR1c0NhbGxiYWNrcywgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7XG4gICAgX19wcml2YXRlQWRkKHRoaXMsIF9lcnJvckNhbGxiYWNrcywgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7XG4gICAgdGhpcy5wdXNoTWVzc2FnZSA9IChtZXNzYWdlKSA9PiB7XG4gICAgICBfX3ByaXZhdGVTZXQodGhpcywgX21lc3NhZ2VzLCBfX3ByaXZhdGVHZXQodGhpcywgX21lc3NhZ2VzKS5jb25jYXQobWVzc2FnZSkpO1xuICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9jYWxsTWVzc2FnZXNDYWxsYmFja3MpLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICB0aGlzLnBvcE1lc3NhZ2UgPSAoKSA9PiB7XG4gICAgICBfX3ByaXZhdGVTZXQodGhpcywgX21lc3NhZ2VzLCBfX3ByaXZhdGVHZXQodGhpcywgX21lc3NhZ2VzKS5zbGljZSgwLCAtMSkpO1xuICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9jYWxsTWVzc2FnZXNDYWxsYmFja3MpLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICB0aGlzLnJlcGxhY2VNZXNzYWdlID0gKGluZGV4LCBtZXNzYWdlKSA9PiB7XG4gICAgICBfX3ByaXZhdGVTZXQodGhpcywgX21lc3NhZ2VzLCBbXG4gICAgICAgIC4uLl9fcHJpdmF0ZUdldCh0aGlzLCBfbWVzc2FnZXMpLnNsaWNlKDAsIGluZGV4KSxcbiAgICAgICAgLy8gV2UgZGVlcCBjbG9uZSB0aGUgbWVzc2FnZSBoZXJlIHRvIGVuc3VyZSB0aGUgbmV3IFJlYWN0IENvbXBpbGVyIChjdXJyZW50bHkgaW4gUkMpIGRldGVjdHMgZGVlcGx5IG5lc3RlZCBwYXJ0cy9tZXRhZGF0YSBjaGFuZ2VzOlxuICAgICAgICB0aGlzLnNuYXBzaG90KG1lc3NhZ2UpLFxuICAgICAgICAuLi5fX3ByaXZhdGVHZXQodGhpcywgX21lc3NhZ2VzKS5zbGljZShpbmRleCArIDEpXG4gICAgICBdKTtcbiAgICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfY2FsbE1lc3NhZ2VzQ2FsbGJhY2tzKS5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgdGhpcy5zbmFwc2hvdCA9ICh2YWx1ZSkgPT4gc3RydWN0dXJlZENsb25lKHZhbHVlKTtcbiAgICB0aGlzW1wifnJlZ2lzdGVyTWVzc2FnZXNDYWxsYmFja1wiXSA9IChvbkNoYW5nZSwgdGhyb3R0bGVXYWl0TXMpID0+IHtcbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGhyb3R0bGVXYWl0TXMgPyB0aHJvdHRsZShvbkNoYW5nZSwgdGhyb3R0bGVXYWl0TXMpIDogb25DaGFuZ2U7XG4gICAgICBfX3ByaXZhdGVHZXQodGhpcywgX21lc3NhZ2VzQ2FsbGJhY2tzKS5hZGQoY2FsbGJhY2spO1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9tZXNzYWdlc0NhbGxiYWNrcykuZGVsZXRlKGNhbGxiYWNrKTtcbiAgICAgIH07XG4gICAgfTtcbiAgICB0aGlzW1wifnJlZ2lzdGVyU3RhdHVzQ2FsbGJhY2tcIl0gPSAob25DaGFuZ2UpID0+IHtcbiAgICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfc3RhdHVzQ2FsbGJhY2tzKS5hZGQob25DaGFuZ2UpO1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9zdGF0dXNDYWxsYmFja3MpLmRlbGV0ZShvbkNoYW5nZSk7XG4gICAgICB9O1xuICAgIH07XG4gICAgdGhpc1tcIn5yZWdpc3RlckVycm9yQ2FsbGJhY2tcIl0gPSAob25DaGFuZ2UpID0+IHtcbiAgICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfZXJyb3JDYWxsYmFja3MpLmFkZChvbkNoYW5nZSk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBfX3ByaXZhdGVHZXQodGhpcywgX2Vycm9yQ2FsbGJhY2tzKS5kZWxldGUob25DaGFuZ2UpO1xuICAgICAgfTtcbiAgICB9O1xuICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfY2FsbE1lc3NhZ2VzQ2FsbGJhY2tzLCAoKSA9PiB7XG4gICAgICBfX3ByaXZhdGVHZXQodGhpcywgX21lc3NhZ2VzQ2FsbGJhY2tzKS5mb3JFYWNoKChjYWxsYmFjaykgPT4gY2FsbGJhY2soKSk7XG4gICAgfSk7XG4gICAgX19wcml2YXRlQWRkKHRoaXMsIF9jYWxsU3RhdHVzQ2FsbGJhY2tzLCAoKSA9PiB7XG4gICAgICBfX3ByaXZhdGVHZXQodGhpcywgX3N0YXR1c0NhbGxiYWNrcykuZm9yRWFjaCgoY2FsbGJhY2spID0+IGNhbGxiYWNrKCkpO1xuICAgIH0pO1xuICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfY2FsbEVycm9yQ2FsbGJhY2tzLCAoKSA9PiB7XG4gICAgICBfX3ByaXZhdGVHZXQodGhpcywgX2Vycm9yQ2FsbGJhY2tzKS5mb3JFYWNoKChjYWxsYmFjaykgPT4gY2FsbGJhY2soKSk7XG4gICAgfSk7XG4gICAgX19wcml2YXRlU2V0KHRoaXMsIF9tZXNzYWdlcywgaW5pdGlhbE1lc3NhZ2VzKTtcbiAgfVxuICBnZXQgc3RhdHVzKCkge1xuICAgIHJldHVybiBfX3ByaXZhdGVHZXQodGhpcywgX3N0YXR1cyk7XG4gIH1cbiAgc2V0IHN0YXR1cyhuZXdTdGF0dXMpIHtcbiAgICBfX3ByaXZhdGVTZXQodGhpcywgX3N0YXR1cywgbmV3U3RhdHVzKTtcbiAgICBfX3ByaXZhdGVHZXQodGhpcywgX2NhbGxTdGF0dXNDYWxsYmFja3MpLmNhbGwodGhpcyk7XG4gIH1cbiAgZ2V0IGVycm9yKCkge1xuICAgIHJldHVybiBfX3ByaXZhdGVHZXQodGhpcywgX2Vycm9yKTtcbiAgfVxuICBzZXQgZXJyb3IobmV3RXJyb3IpIHtcbiAgICBfX3ByaXZhdGVTZXQodGhpcywgX2Vycm9yLCBuZXdFcnJvcik7XG4gICAgX19wcml2YXRlR2V0KHRoaXMsIF9jYWxsRXJyb3JDYWxsYmFja3MpLmNhbGwodGhpcyk7XG4gIH1cbiAgZ2V0IG1lc3NhZ2VzKCkge1xuICAgIHJldHVybiBfX3ByaXZhdGVHZXQodGhpcywgX21lc3NhZ2VzKTtcbiAgfVxuICBzZXQgbWVzc2FnZXMobmV3TWVzc2FnZXMpIHtcbiAgICBfX3ByaXZhdGVTZXQodGhpcywgX21lc3NhZ2VzLCBbLi4ubmV3TWVzc2FnZXNdKTtcbiAgICBfX3ByaXZhdGVHZXQodGhpcywgX2NhbGxNZXNzYWdlc0NhbGxiYWNrcykuY2FsbCh0aGlzKTtcbiAgfVxufTtcbl9tZXNzYWdlcyA9IG5ldyBXZWFrTWFwKCk7XG5fc3RhdHVzID0gbmV3IFdlYWtNYXAoKTtcbl9lcnJvciA9IG5ldyBXZWFrTWFwKCk7XG5fbWVzc2FnZXNDYWxsYmFja3MgPSBuZXcgV2Vha01hcCgpO1xuX3N0YXR1c0NhbGxiYWNrcyA9IG5ldyBXZWFrTWFwKCk7XG5fZXJyb3JDYWxsYmFja3MgPSBuZXcgV2Vha01hcCgpO1xuX2NhbGxNZXNzYWdlc0NhbGxiYWNrcyA9IG5ldyBXZWFrTWFwKCk7XG5fY2FsbFN0YXR1c0NhbGxiYWNrcyA9IG5ldyBXZWFrTWFwKCk7XG5fY2FsbEVycm9yQ2FsbGJhY2tzID0gbmV3IFdlYWtNYXAoKTtcbnZhciBfc3RhdGU7XG52YXIgQ2hhdCA9IGNsYXNzIGV4dGVuZHMgaW1wb3J0X2FpLkFic3RyYWN0Q2hhdCB7XG4gIGNvbnN0cnVjdG9yKHsgbWVzc2FnZXMsIC4uLmluaXQgfSkge1xuICAgIGNvbnN0IHN0YXRlID0gbmV3IFJlYWN0Q2hhdFN0YXRlKG1lc3NhZ2VzKTtcbiAgICBzdXBlcih7IC4uLmluaXQsIHN0YXRlIH0pO1xuICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfc3RhdGUsIHZvaWQgMCk7XG4gICAgdGhpc1tcIn5yZWdpc3Rlck1lc3NhZ2VzQ2FsbGJhY2tcIl0gPSAob25DaGFuZ2UsIHRocm90dGxlV2FpdE1zKSA9PiBfX3ByaXZhdGVHZXQodGhpcywgX3N0YXRlKVtcIn5yZWdpc3Rlck1lc3NhZ2VzQ2FsbGJhY2tcIl0ob25DaGFuZ2UsIHRocm90dGxlV2FpdE1zKTtcbiAgICB0aGlzW1wifnJlZ2lzdGVyU3RhdHVzQ2FsbGJhY2tcIl0gPSAob25DaGFuZ2UpID0+IF9fcHJpdmF0ZUdldCh0aGlzLCBfc3RhdGUpW1wifnJlZ2lzdGVyU3RhdHVzQ2FsbGJhY2tcIl0ob25DaGFuZ2UpO1xuICAgIHRoaXNbXCJ+cmVnaXN0ZXJFcnJvckNhbGxiYWNrXCJdID0gKG9uQ2hhbmdlKSA9PiBfX3ByaXZhdGVHZXQodGhpcywgX3N0YXRlKVtcIn5yZWdpc3RlckVycm9yQ2FsbGJhY2tcIl0ob25DaGFuZ2UpO1xuICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfc3RhdGUsIHN0YXRlKTtcbiAgfVxufTtcbl9zdGF0ZSA9IG5ldyBXZWFrTWFwKCk7XG5cbi8vIHNyYy91c2UtY2hhdC50c1xuZnVuY3Rpb24gdXNlQ2hhdCh7XG4gIGV4cGVyaW1lbnRhbF90aHJvdHRsZTogdGhyb3R0bGVXYWl0TXMsXG4gIHJlc3VtZSA9IGZhbHNlLFxuICAuLi5vcHRpb25zXG59ID0ge30pIHtcbiAgY29uc3QgY2hhdFJlZiA9ICgwLCBpbXBvcnRfcmVhY3QudXNlUmVmKShcbiAgICBcImNoYXRcIiBpbiBvcHRpb25zID8gb3B0aW9ucy5jaGF0IDogbmV3IENoYXQob3B0aW9ucylcbiAgKTtcbiAgY29uc3Qgc2hvdWxkUmVjcmVhdGVDaGF0ID0gXCJjaGF0XCIgaW4gb3B0aW9ucyAmJiBvcHRpb25zLmNoYXQgIT09IGNoYXRSZWYuY3VycmVudCB8fCBcImlkXCIgaW4gb3B0aW9ucyAmJiBjaGF0UmVmLmN1cnJlbnQuaWQgIT09IG9wdGlvbnMuaWQ7XG4gIGlmIChzaG91bGRSZWNyZWF0ZUNoYXQpIHtcbiAgICBjaGF0UmVmLmN1cnJlbnQgPSBcImNoYXRcIiBpbiBvcHRpb25zID8gb3B0aW9ucy5jaGF0IDogbmV3IENoYXQob3B0aW9ucyk7XG4gIH1cbiAgY29uc3Qgb3B0aW9uc0lkID0gXCJpZFwiIGluIG9wdGlvbnMgPyBvcHRpb25zLmlkIDogbnVsbDtcbiAgY29uc3Qgc3Vic2NyaWJlVG9NZXNzYWdlcyA9ICgwLCBpbXBvcnRfcmVhY3QudXNlQ2FsbGJhY2spKFxuICAgICh1cGRhdGUpID0+IGNoYXRSZWYuY3VycmVudFtcIn5yZWdpc3Rlck1lc3NhZ2VzQ2FsbGJhY2tcIl0odXBkYXRlLCB0aHJvdHRsZVdhaXRNcyksXG4gICAgLy8gb3B0aW9uc0lkIGlzIHJlcXVpcmVkIHRvIHRyaWdnZXIgcmUtc3Vic2NyaXB0aW9uIHdoZW4gdGhlIGNoYXQgSUQgY2hhbmdlc1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICBbdGhyb3R0bGVXYWl0TXMsIG9wdGlvbnNJZF1cbiAgKTtcbiAgY29uc3QgbWVzc2FnZXMgPSAoMCwgaW1wb3J0X3JlYWN0LnVzZVN5bmNFeHRlcm5hbFN0b3JlKShcbiAgICBzdWJzY3JpYmVUb01lc3NhZ2VzLFxuICAgICgpID0+IGNoYXRSZWYuY3VycmVudC5tZXNzYWdlcyxcbiAgICAoKSA9PiBjaGF0UmVmLmN1cnJlbnQubWVzc2FnZXNcbiAgKTtcbiAgY29uc3Qgc3RhdHVzID0gKDAsIGltcG9ydF9yZWFjdC51c2VTeW5jRXh0ZXJuYWxTdG9yZSkoXG4gICAgY2hhdFJlZi5jdXJyZW50W1wifnJlZ2lzdGVyU3RhdHVzQ2FsbGJhY2tcIl0sXG4gICAgKCkgPT4gY2hhdFJlZi5jdXJyZW50LnN0YXR1cyxcbiAgICAoKSA9PiBjaGF0UmVmLmN1cnJlbnQuc3RhdHVzXG4gICk7XG4gIGNvbnN0IGVycm9yID0gKDAsIGltcG9ydF9yZWFjdC51c2VTeW5jRXh0ZXJuYWxTdG9yZSkoXG4gICAgY2hhdFJlZi5jdXJyZW50W1wifnJlZ2lzdGVyRXJyb3JDYWxsYmFja1wiXSxcbiAgICAoKSA9PiBjaGF0UmVmLmN1cnJlbnQuZXJyb3IsXG4gICAgKCkgPT4gY2hhdFJlZi5jdXJyZW50LmVycm9yXG4gICk7XG4gIGNvbnN0IHNldE1lc3NhZ2VzID0gKDAsIGltcG9ydF9yZWFjdC51c2VDYWxsYmFjaykoXG4gICAgKG1lc3NhZ2VzUGFyYW0pID0+IHtcbiAgICAgIGlmICh0eXBlb2YgbWVzc2FnZXNQYXJhbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIG1lc3NhZ2VzUGFyYW0gPSBtZXNzYWdlc1BhcmFtKGNoYXRSZWYuY3VycmVudC5tZXNzYWdlcyk7XG4gICAgICB9XG4gICAgICBjaGF0UmVmLmN1cnJlbnQubWVzc2FnZXMgPSBtZXNzYWdlc1BhcmFtO1xuICAgIH0sXG4gICAgW2NoYXRSZWZdXG4gICk7XG4gICgwLCBpbXBvcnRfcmVhY3QudXNlRWZmZWN0KSgoKSA9PiB7XG4gICAgaWYgKHJlc3VtZSkge1xuICAgICAgY2hhdFJlZi5jdXJyZW50LnJlc3VtZVN0cmVhbSgpO1xuICAgIH1cbiAgfSwgW3Jlc3VtZSwgY2hhdFJlZl0pO1xuICByZXR1cm4ge1xuICAgIGlkOiBjaGF0UmVmLmN1cnJlbnQuaWQsXG4gICAgbWVzc2FnZXMsXG4gICAgc2V0TWVzc2FnZXMsXG4gICAgc2VuZE1lc3NhZ2U6IGNoYXRSZWYuY3VycmVudC5zZW5kTWVzc2FnZSxcbiAgICByZWdlbmVyYXRlOiBjaGF0UmVmLmN1cnJlbnQucmVnZW5lcmF0ZSxcbiAgICBjbGVhckVycm9yOiBjaGF0UmVmLmN1cnJlbnQuY2xlYXJFcnJvcixcbiAgICBzdG9wOiBjaGF0UmVmLmN1cnJlbnQuc3RvcCxcbiAgICBlcnJvcixcbiAgICByZXN1bWVTdHJlYW06IGNoYXRSZWYuY3VycmVudC5yZXN1bWVTdHJlYW0sXG4gICAgc3RhdHVzLFxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBgYWRkVG9vbE91dHB1dGAgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBhZGRUb29sUmVzdWx0OiBjaGF0UmVmLmN1cnJlbnQuYWRkVG9vbE91dHB1dCxcbiAgICBhZGRUb29sT3V0cHV0OiBjaGF0UmVmLmN1cnJlbnQuYWRkVG9vbE91dHB1dFxuICB9O1xufVxuXG4vLyBzcmMvdXNlLWNvbXBsZXRpb24udHNcbnZhciBpbXBvcnRfYWkyID0gcmVxdWlyZShcImFpXCIpO1xudmFyIGltcG9ydF9yZWFjdDIgPSByZXF1aXJlKFwicmVhY3RcIik7XG52YXIgaW1wb3J0X3N3ciA9IF9fdG9FU00ocmVxdWlyZShcInN3clwiKSk7XG5mdW5jdGlvbiB1c2VDb21wbGV0aW9uKHtcbiAgYXBpID0gXCIvYXBpL2NvbXBsZXRpb25cIixcbiAgaWQsXG4gIGluaXRpYWxDb21wbGV0aW9uID0gXCJcIixcbiAgaW5pdGlhbElucHV0ID0gXCJcIixcbiAgY3JlZGVudGlhbHMsXG4gIGhlYWRlcnMsXG4gIGJvZHksXG4gIHN0cmVhbVByb3RvY29sID0gXCJkYXRhXCIsXG4gIGZldGNoOiBmZXRjaDIsXG4gIG9uRmluaXNoLFxuICBvbkVycm9yLFxuICBleHBlcmltZW50YWxfdGhyb3R0bGU6IHRocm90dGxlV2FpdE1zXG59ID0ge30pIHtcbiAgY29uc3QgaG9va0lkID0gKDAsIGltcG9ydF9yZWFjdDIudXNlSWQpKCk7XG4gIGNvbnN0IGNvbXBsZXRpb25JZCA9IGlkIHx8IGhvb2tJZDtcbiAgY29uc3QgeyBkYXRhLCBtdXRhdGUgfSA9ICgwLCBpbXBvcnRfc3dyLmRlZmF1bHQpKFthcGksIGNvbXBsZXRpb25JZF0sIG51bGwsIHtcbiAgICBmYWxsYmFja0RhdGE6IGluaXRpYWxDb21wbGV0aW9uXG4gIH0pO1xuICBjb25zdCB7IGRhdGE6IGlzTG9hZGluZyA9IGZhbHNlLCBtdXRhdGU6IG11dGF0ZUxvYWRpbmcgfSA9ICgwLCBpbXBvcnRfc3dyLmRlZmF1bHQpKFxuICAgIFtjb21wbGV0aW9uSWQsIFwibG9hZGluZ1wiXSxcbiAgICBudWxsXG4gICk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gKDAsIGltcG9ydF9yZWFjdDIudXNlU3RhdGUpKHZvaWQgMCk7XG4gIGNvbnN0IGNvbXBsZXRpb24gPSBkYXRhO1xuICBjb25zdCBbYWJvcnRDb250cm9sbGVyLCBzZXRBYm9ydENvbnRyb2xsZXJdID0gKDAsIGltcG9ydF9yZWFjdDIudXNlU3RhdGUpKG51bGwpO1xuICBjb25zdCBleHRyYU1ldGFkYXRhUmVmID0gKDAsIGltcG9ydF9yZWFjdDIudXNlUmVmKSh7XG4gICAgY3JlZGVudGlhbHMsXG4gICAgaGVhZGVycyxcbiAgICBib2R5XG4gIH0pO1xuICAoMCwgaW1wb3J0X3JlYWN0Mi51c2VFZmZlY3QpKCgpID0+IHtcbiAgICBleHRyYU1ldGFkYXRhUmVmLmN1cnJlbnQgPSB7XG4gICAgICBjcmVkZW50aWFscyxcbiAgICAgIGhlYWRlcnMsXG4gICAgICBib2R5XG4gICAgfTtcbiAgfSwgW2NyZWRlbnRpYWxzLCBoZWFkZXJzLCBib2R5XSk7XG4gIGNvbnN0IHRyaWdnZXJSZXF1ZXN0ID0gKDAsIGltcG9ydF9yZWFjdDIudXNlQ2FsbGJhY2spKFxuICAgIGFzeW5jIChwcm9tcHQsIG9wdGlvbnMpID0+ICgwLCBpbXBvcnRfYWkyLmNhbGxDb21wbGV0aW9uQXBpKSh7XG4gICAgICBhcGksXG4gICAgICBwcm9tcHQsXG4gICAgICBjcmVkZW50aWFsczogZXh0cmFNZXRhZGF0YVJlZi5jdXJyZW50LmNyZWRlbnRpYWxzLFxuICAgICAgaGVhZGVyczogeyAuLi5leHRyYU1ldGFkYXRhUmVmLmN1cnJlbnQuaGVhZGVycywgLi4ub3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5oZWFkZXJzIH0sXG4gICAgICBib2R5OiB7XG4gICAgICAgIC4uLmV4dHJhTWV0YWRhdGFSZWYuY3VycmVudC5ib2R5LFxuICAgICAgICAuLi5vcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmJvZHlcbiAgICAgIH0sXG4gICAgICBzdHJlYW1Qcm90b2NvbCxcbiAgICAgIGZldGNoOiBmZXRjaDIsXG4gICAgICAvLyB0aHJvdHRsZSBzdHJlYW1lZCB1aSB1cGRhdGVzOlxuICAgICAgc2V0Q29tcGxldGlvbjogdGhyb3R0bGUoXG4gICAgICAgIChjb21wbGV0aW9uMikgPT4gbXV0YXRlKGNvbXBsZXRpb24yLCBmYWxzZSksXG4gICAgICAgIHRocm90dGxlV2FpdE1zXG4gICAgICApLFxuICAgICAgc2V0TG9hZGluZzogbXV0YXRlTG9hZGluZyxcbiAgICAgIHNldEVycm9yLFxuICAgICAgc2V0QWJvcnRDb250cm9sbGVyLFxuICAgICAgb25GaW5pc2gsXG4gICAgICBvbkVycm9yXG4gICAgfSksXG4gICAgW1xuICAgICAgbXV0YXRlLFxuICAgICAgbXV0YXRlTG9hZGluZyxcbiAgICAgIGFwaSxcbiAgICAgIGV4dHJhTWV0YWRhdGFSZWYsXG4gICAgICBzZXRBYm9ydENvbnRyb2xsZXIsXG4gICAgICBvbkZpbmlzaCxcbiAgICAgIG9uRXJyb3IsXG4gICAgICBzZXRFcnJvcixcbiAgICAgIHN0cmVhbVByb3RvY29sLFxuICAgICAgZmV0Y2gyLFxuICAgICAgdGhyb3R0bGVXYWl0TXNcbiAgICBdXG4gICk7XG4gIGNvbnN0IHN0b3AgPSAoMCwgaW1wb3J0X3JlYWN0Mi51c2VDYWxsYmFjaykoKCkgPT4ge1xuICAgIGlmIChhYm9ydENvbnRyb2xsZXIpIHtcbiAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgc2V0QWJvcnRDb250cm9sbGVyKG51bGwpO1xuICAgIH1cbiAgfSwgW2Fib3J0Q29udHJvbGxlcl0pO1xuICBjb25zdCBzZXRDb21wbGV0aW9uID0gKDAsIGltcG9ydF9yZWFjdDIudXNlQ2FsbGJhY2spKFxuICAgIChjb21wbGV0aW9uMikgPT4ge1xuICAgICAgbXV0YXRlKGNvbXBsZXRpb24yLCBmYWxzZSk7XG4gICAgfSxcbiAgICBbbXV0YXRlXVxuICApO1xuICBjb25zdCBjb21wbGV0ZSA9ICgwLCBpbXBvcnRfcmVhY3QyLnVzZUNhbGxiYWNrKShcbiAgICBhc3luYyAocHJvbXB0LCBvcHRpb25zKSA9PiB7XG4gICAgICByZXR1cm4gdHJpZ2dlclJlcXVlc3QocHJvbXB0LCBvcHRpb25zKTtcbiAgICB9LFxuICAgIFt0cmlnZ2VyUmVxdWVzdF1cbiAgKTtcbiAgY29uc3QgW2lucHV0LCBzZXRJbnB1dF0gPSAoMCwgaW1wb3J0X3JlYWN0Mi51c2VTdGF0ZSkoaW5pdGlhbElucHV0KTtcbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gKDAsIGltcG9ydF9yZWFjdDIudXNlQ2FsbGJhY2spKFxuICAgIChldmVudCkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgKF9hID0gZXZlbnQgPT0gbnVsbCA/IHZvaWQgMCA6IGV2ZW50LnByZXZlbnREZWZhdWx0KSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChldmVudCk7XG4gICAgICByZXR1cm4gaW5wdXQgPyBjb21wbGV0ZShpbnB1dCkgOiB2b2lkIDA7XG4gICAgfSxcbiAgICBbaW5wdXQsIGNvbXBsZXRlXVxuICApO1xuICBjb25zdCBoYW5kbGVJbnB1dENoYW5nZSA9ICgwLCBpbXBvcnRfcmVhY3QyLnVzZUNhbGxiYWNrKShcbiAgICAoZSkgPT4ge1xuICAgICAgc2V0SW5wdXQoZS50YXJnZXQudmFsdWUpO1xuICAgIH0sXG4gICAgW3NldElucHV0XVxuICApO1xuICByZXR1cm4ge1xuICAgIGNvbXBsZXRpb24sXG4gICAgY29tcGxldGUsXG4gICAgZXJyb3IsXG4gICAgc2V0Q29tcGxldGlvbixcbiAgICBzdG9wLFxuICAgIGlucHV0LFxuICAgIHNldElucHV0LFxuICAgIGhhbmRsZUlucHV0Q2hhbmdlLFxuICAgIGhhbmRsZVN1Ym1pdCxcbiAgICBpc0xvYWRpbmdcbiAgfTtcbn1cblxuLy8gc3JjL3VzZS1vYmplY3QudHNcbnZhciBpbXBvcnRfcHJvdmlkZXJfdXRpbHMgPSByZXF1aXJlKFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiKTtcbnZhciBpbXBvcnRfYWkzID0gcmVxdWlyZShcImFpXCIpO1xudmFyIGltcG9ydF9yZWFjdDMgPSByZXF1aXJlKFwicmVhY3RcIik7XG52YXIgaW1wb3J0X3N3cjIgPSBfX3RvRVNNKHJlcXVpcmUoXCJzd3JcIikpO1xudmFyIGdldE9yaWdpbmFsRmV0Y2ggPSAoKSA9PiBmZXRjaDtcbmZ1bmN0aW9uIHVzZU9iamVjdCh7XG4gIGFwaSxcbiAgaWQsXG4gIHNjaGVtYSxcbiAgLy8gcmVxdWlyZWQsIGluIHRoZSBmdXR1cmUgd2Ugd2lsbCB1c2UgaXQgZm9yIHZhbGlkYXRpb25cbiAgaW5pdGlhbFZhbHVlLFxuICBmZXRjaDogZmV0Y2gyLFxuICBvbkVycm9yLFxuICBvbkZpbmlzaCxcbiAgaGVhZGVycyxcbiAgY3JlZGVudGlhbHNcbn0pIHtcbiAgY29uc3QgaG9va0lkID0gKDAsIGltcG9ydF9yZWFjdDMudXNlSWQpKCk7XG4gIGNvbnN0IGNvbXBsZXRpb25JZCA9IGlkICE9IG51bGwgPyBpZCA6IGhvb2tJZDtcbiAgY29uc3QgeyBkYXRhLCBtdXRhdGUgfSA9ICgwLCBpbXBvcnRfc3dyMi5kZWZhdWx0KShcbiAgICBbYXBpLCBjb21wbGV0aW9uSWRdLFxuICAgIG51bGwsXG4gICAgeyBmYWxsYmFja0RhdGE6IGluaXRpYWxWYWx1ZSB9XG4gICk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gKDAsIGltcG9ydF9yZWFjdDMudXNlU3RhdGUpKHZvaWQgMCk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSAoMCwgaW1wb3J0X3JlYWN0My51c2VTdGF0ZSkoZmFsc2UpO1xuICBjb25zdCBhYm9ydENvbnRyb2xsZXJSZWYgPSAoMCwgaW1wb3J0X3JlYWN0My51c2VSZWYpKG51bGwpO1xuICBjb25zdCBzdG9wID0gKDAsIGltcG9ydF9yZWFjdDMudXNlQ2FsbGJhY2spKCgpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgdHJ5IHtcbiAgICAgIChfYSA9IGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EuYWJvcnQoKTtcbiAgICB9IGNhdGNoIChpZ25vcmVkKSB7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICB9LCBbXSk7XG4gIGNvbnN0IHN1Ym1pdCA9IGFzeW5jIChpbnB1dCkgPT4ge1xuICAgIHZhciBfYTtcbiAgICB0cnkge1xuICAgICAgY2xlYXJPYmplY3QoKTtcbiAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcbiAgICAgIGNvbnN0IGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50ID0gYWJvcnRDb250cm9sbGVyO1xuICAgICAgY29uc3QgYWN0dWFsRmV0Y2ggPSBmZXRjaDIgIT0gbnVsbCA/IGZldGNoMiA6IGdldE9yaWdpbmFsRmV0Y2goKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYWN0dWFsRmV0Y2goYXBpLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAuLi5oZWFkZXJzXG4gICAgICAgIH0sXG4gICAgICAgIGNyZWRlbnRpYWxzLFxuICAgICAgICBzaWduYWw6IGFib3J0Q29udHJvbGxlci5zaWduYWwsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGlucHV0KVxuICAgICAgfSk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAoX2EgPSBhd2FpdCByZXNwb25zZS50ZXh0KCkpICE9IG51bGwgPyBfYSA6IFwiRmFpbGVkIHRvIGZldGNoIHRoZSByZXNwb25zZS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHJlc3BvbnNlLmJvZHkgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgcmVzcG9uc2UgYm9keSBpcyBlbXB0eS5cIik7XG4gICAgICB9XG4gICAgICBsZXQgYWNjdW11bGF0ZWRUZXh0ID0gXCJcIjtcbiAgICAgIGxldCBsYXRlc3RPYmplY3QgPSB2b2lkIDA7XG4gICAgICBhd2FpdCByZXNwb25zZS5ib2R5LnBpcGVUaHJvdWdoKG5ldyBUZXh0RGVjb2RlclN0cmVhbSgpKS5waXBlVG8oXG4gICAgICAgIG5ldyBXcml0YWJsZVN0cmVhbSh7XG4gICAgICAgICAgYXN5bmMgd3JpdGUoY2h1bmspIHtcbiAgICAgICAgICAgIGFjY3VtdWxhdGVkVGV4dCArPSBjaHVuaztcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGF3YWl0ICgwLCBpbXBvcnRfYWkzLnBhcnNlUGFydGlhbEpzb24pKGFjY3VtdWxhdGVkVGV4dCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50T2JqZWN0ID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoISgwLCBpbXBvcnRfYWkzLmlzRGVlcEVxdWFsRGF0YSkobGF0ZXN0T2JqZWN0LCBjdXJyZW50T2JqZWN0KSkge1xuICAgICAgICAgICAgICBsYXRlc3RPYmplY3QgPSBjdXJyZW50T2JqZWN0O1xuICAgICAgICAgICAgICBtdXRhdGUoY3VycmVudE9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhc3luYyBjbG9zZSgpIHtcbiAgICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgICBpZiAob25GaW5pc2ggIT0gbnVsbCkge1xuICAgICAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gYXdhaXQgKDAsIGltcG9ydF9wcm92aWRlcl91dGlscy5zYWZlVmFsaWRhdGVUeXBlcykoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBsYXRlc3RPYmplY3QsXG4gICAgICAgICAgICAgICAgc2NoZW1hOiAoMCwgaW1wb3J0X2FpMy5hc1NjaGVtYSkoc2NoZW1hKVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgb25GaW5pc2goXG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvblJlc3VsdC5zdWNjZXNzID8geyBvYmplY3Q6IHZhbGlkYXRpb25SZXN1bHQudmFsdWUsIGVycm9yOiB2b2lkIDAgfSA6IHsgb2JqZWN0OiB2b2lkIDAsIGVycm9yOiB2YWxpZGF0aW9uUmVzdWx0LmVycm9yIH1cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yMikge1xuICAgICAgaWYgKCgwLCBpbXBvcnRfcHJvdmlkZXJfdXRpbHMuaXNBYm9ydEVycm9yKShlcnJvcjIpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChvbkVycm9yICYmIGVycm9yMiBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIG9uRXJyb3IoZXJyb3IyKTtcbiAgICAgIH1cbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICBzZXRFcnJvcihlcnJvcjIgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yMiA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IyKSkpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgY2xlYXIgPSAoKSA9PiB7XG4gICAgc3RvcCgpO1xuICAgIGNsZWFyT2JqZWN0KCk7XG4gIH07XG4gIGNvbnN0IGNsZWFyT2JqZWN0ID0gKCkgPT4ge1xuICAgIHNldEVycm9yKHZvaWQgMCk7XG4gICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICBtdXRhdGUodm9pZCAwKTtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBzdWJtaXQsXG4gICAgb2JqZWN0OiBkYXRhLFxuICAgIGVycm9yLFxuICAgIGlzTG9hZGluZyxcbiAgICBzdG9wLFxuICAgIGNsZWFyXG4gIH07XG59XG52YXIgZXhwZXJpbWVudGFsX3VzZU9iamVjdCA9IHVzZU9iamVjdDtcbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBDaGF0LFxuICBleHBlcmltZW50YWxfdXNlT2JqZWN0LFxuICB1c2VDaGF0LFxuICB1c2VDb21wbGV0aW9uXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@ai-sdk+react@2.0.93_react@18.2.0_zod@4.1.12/node_modules/@ai-sdk/react/dist/index.js\n");

/***/ })

};
;